@import 'variables'

$map-height: 100%

.ol-popup
  position: absolute
  background-color: white
  -webkit-filter: drop-shadow(0 1px 4px rgba(0,0,0,0.2))
  filter: drop-shadow(0 1px 4px rgba(0,0,0,0.2))
  padding: 15px
  border-radius: 10px
  border: 1px solid #cccccc
  bottom: 12px
  left: -50px
  min-width: 280px

.ol-popup:after, .ol-popup:before
  top: 100%
  border: solid transparent
  content: " "
  height: 0
  width: 0
  position: absolute
  pointer-events: none

.ol-popup:after
  border-top-color: white
  border-width: 10px
  left: 48px
  margin-left: -10px

.ol-popup:before
  border-top-color: #cccccc
  border-width: 11px
  left: 48px
  margin-left: -11px

.ol-popup-closer
  text-decoration: none
  position: absolute
  top: 2px
  right: 8px
  color: black

.ol-popup-closer:after
  content: "âœ–"

.rotate-north
  top: 65px
  left: .5em

.ol-touch .rotate-north
  top: 80px

.content-map
  border-top: 1px solid $border-color
  position: relative
  height: calc(100% - 62px)

  .container
    margin-top: 20px
    #interfaces
      .interface
        float: left

      .chart
        margin-right: 10px
        display: none

        select#layers
          border-radius: 4px 0 0 4px

        select#display_options
          border-radius: 0

        button.apply-options
          background-color: $bg-color
          border-radius: 0 4px 4px 0

        .legend
          position: relative

          .dynamic
            width: 60%
            background-color: white
            padding: 6px 15px

            .legend-item
              display: none

              .bar
                display: table-row
                span
                  vertical-align: middle
                  display: table-cell
                  padding: 3px 0

                  &.min
                    padding-right: 5px

                  &.max
                    padding-left: 5px

                  &.color > .color-div
                    width: 60px
                    height: 20px

    .dataset-selector
      width: 300px

    #search-bar
      .form
        form, input
          margin-bottom: 0

        input
          vertical-align: top

        form.no-results
          input#search-bar
            border: 1px solid $error-color
          ul li:hover
            cursor: auto
            background-color: $bg-color
            color: #000

        input#search-bar
          border: 1px solid #bbb
          line-height: 34px
          border-radius: 4px 0 0 4px

        input#search-submit
          background-color: $bg-color
          border-radius: 0 4px 4px 0

        ul.options
          background-color: $bg-color
          border: 1px solid #bbb
          border-radius: 4px
          list-style: none
          width: 290px
          padding: 4px
          max-height: 300px
          overflow: scroll
          li
            padding: 5px
            border-radius: 4px
            &:hover
              cursor: pointer
              background-color: $selected-color
              color: #fff
            &:active
              background-color: darken($selected-color, 5)
            &:last-child
              margin-bottom: 0


    #dataset-overlay
      position: relative
      width: 960px
      display: none
      background-color: $bg-color
      box-shadow: 0 1px 2px rgba(0,0,0,0.10)
      margin-bottom: 75px
      z-index: 2

      .intro
        padding: 20px 60px 30px

      .heading
        padding: 20px 35px
        text-align: center
        border-bottom: 1px solid $border-color

      .errors .error
        margin-bottom: 10px
        background-color: $error-color
        border-color: darken($error-color, 20)
        padding: 5px 10px
        white-space: pre-wrap

      form
        .attributes .editable .input span.val input.changed
          &.valid
            border-color: $success-color
          &.invalid
            border-color: $error-color

        .overview-edits .apply.changes
          &.valid
            background-color: $success-color

            .button, button, input[type=submit]
              background-color: darken($success-color, 5)

          &.invalid
            background-color: $error-color

            .button, button, input[type=submit]
              background-color: darken($error-color, 5)

        .edit-form
          textarea#change_message
            width: 98%
            height: 200px

          .field
            span.unit
              margin-left: 5px

      .button-close
        position: absolute
        top: 0
        right: 0

        a
          padding: 0 15px
          height: 38px
          line-height: 38px
          display: block
          color: black
          text-decoration: none

          &:hover
            background-color: darken($bg-color, 5)

  #map
    height: $map-height
    position: absolute
    width: 100%

    &.wrapped
      position: fixed
      top: 0

#popup-content
  .content
    h5
      margin-bottom: 5px
    em
      margin-bottom: 15px
      display: block

.interface-bottom
  position: fixed
  bottom: 10px
  width: 100%

  #buttons-bottom
    .button-group
      text-align: center

      button
        background-color: $bg-color
        box-shadow: 0 1px 2px rgba(0,0,0,0.10)

        &:first-child
          border-radius: 4px 0 0 4px

        &:last-child
          border-radius: 0 4px 4px 0

        &.enabled
          background-color: darken($selected-color, 5)
          color: white
